# Vue SPA 伪静态规则 - lvkingroc.icu
# 粘贴到宝塔面板「伪静态设置」中

# 强制去掉 www，301 重定向到裸域名
if ($host = 'www.lvkingroc.icu') {
    return 301 https://lvkingroc.icu$request_uri;
}

# 开启 gzip 预压缩（直接发送 .gz 文件，无需实时压缩）
gzip_static on;

# JS/CSS 等静态资源 - 长期缓存（文件名含 hash，内容变更时 hash 自动更新）
location ~* \.(?:js|css)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
    gzip_static on;
}

# WebP 图片 - 长期缓存
location ~* \.webp$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
}

# PDF 简历文件 - 缓存7天
location ~* \.pdf$ {
    expires 7d;
    add_header Cache-Control "public";
}

# favicon - 缓存30天
location = /favicon.ico {
    expires 30d;
    access_log off;
}

# Vue Router History 模式 - 所有路由回退到 index.html
location / {
    try_files $uri $uri/ /index.html;
}

# ============================================
# 以下内容放在「站点配置文件」中（非伪静态），
# 添加到现有 server 块的 } 之后
# ============================================

# 9106 端口跳转到 HTTPS 443
# server {
#     listen 9106;
#     server_name lvkingroc.icu;
#     return 301 https://lvkingroc.icu$request_uri;
# }
